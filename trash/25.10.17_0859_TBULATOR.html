<!--

ë„¤, ê°€ëŠ¥í•©ë‹ˆë‹¤. í•µì‹¬ì€ Ctrl/Cmd + C í‚¤ë¥¼ ëˆ„ë¥¼ ë•Œ Tabulatorì˜ copyToClipboard()ë¥¼ ì§ì ‘ í˜¸ì¶œí•´ ì£¼ëŠ” ê²ƒì…ë‹ˆë‹¤.
ë²„íŠ¼ ì—†ì´ë„ ë™ì‘í•˜ë„ë¡ í‚¤ë³´ë“œ í•¸ë“¤ëŸ¬ë¥¼ ì¶”ê°€í•˜ë©´ í•´ê²°ë¼ìš”.

ì•„ë˜ ì½”ë“œëŠ”

â€œì„ íƒ ì˜ì—­ ë³µì‚¬â€ ë²„íŠ¼ì„ ì‚­ì œí–ˆê³ ,

Ctrl/Cmd + C ëˆ„ë¥´ë©´ í˜„ì¬ ì„ íƒí•œ ì…€ ë²”ìœ„ë¥¼ ë³µì‚¬í•©ë‹ˆë‹¤.

ì…€ í¸ì§‘ ì¤‘(input/textarea)ì—ëŠ” ê¸°ë³¸ ë³µì‚¬ë¥¼ ë§‰ì§€ ì•Šë„ë¡ ë¶„ê¸°í–ˆìŠµë‹ˆë‹¤.

í…Œì´ë¸”ì´ í‚¤ ì´ë²¤íŠ¸ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ë°›ë„ë¡ ì»¨í…Œì´ë„ˆì— tabindex="0"ì„ ë‘ê³ , ë§ˆìš°ìŠ¤ë¡œ í•œ ë²ˆì´ë¼ë„ í´ë¦­í•˜ë©´ í¬ì»¤ìŠ¤ë¥¼ ê°•ì œë¡œ ì£¼ê²Œ í–ˆìŠµë‹ˆë‹¤.

(ì´ë¯¸ í™•ì¸í•˜ì‹  ëŒ€ë¡œ) HTTPS ë˜ëŠ” http://localhost
 ê°™ì€ ë³´ì•ˆ ì»¨í…ìŠ¤íŠ¸ì—ì„œ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”.


 ì „ì²´ ì½”ë“œ (ë²„íŠ¼ ì‚­ì œ + Ctrl/Cmd + C ì§€ì›)
-->


<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <title>Tabulator ë°”ë‹ë¼ ì˜ˆì‹œ</title>

  <!-- Tabulator CSS (CDN) -->
  <link href="https://unpkg.com/tabulator-tables@latest/dist/css/tabulator.min.css" rel="stylesheet">

  <style>
    /* ë°ëª¨ìš© ìµœì†Œ ìŠ¤íƒ€ì¼ */
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, sans-serif; margin: 24px; }
    .toolbar { display:flex; gap:8px; margin-bottom:12px; flex-wrap: wrap; }
    #table { height: 420px; } /* ê³ ì • ë†’ì´: ê°€ìƒ ìŠ¤í¬ë¡¤ í™œì„±í™” */
    .note { color:#555; font-size: 13px; margin-top: 8px; }
    .search { width: 220px; padding: 6px 8px; }
    button { padding: 6px 10px; border:1px solid #ddd; background:#f7f7f7; border-radius:6px; cursor:pointer; }
    button:hover { background:#eee; }
  </style>
</head>
<body>

  <h1>Tabulator ë°”ë‹ë¼ JS ì˜ˆì‹œ</h1>

  <div class="toolbar">
    <!-- ê²€ìƒ‰ ì…ë ¥ -->
    <input id="search" class="search" type="text" placeholder="ì´ë¦„/ë„ì‹œ ê²€ìƒ‰ (ì‹¤ì‹œê°„ í•„í„°)" />

    <!-- í–‰ ì¡°ì‘ -->
    <button id="add-row">í–‰ ì¶”ê°€</button>
    <button id="del-row">ì„ íƒ í–‰ ì‚­ì œ</button>

    <!-- ë‚´ë³´ë‚´ê¸° -->
    <button id="export-csv">CSV ë‚´ë³´ë‚´ê¸°</button>
  </div>

  <!-- í…Œì´ë¸” ì»¨í…Œì´ë„ˆ
       tabindex="0"ë¥¼ ì£¼ë©´ divê°€ í¬ì»¤ìŠ¤ë¥¼ ë°›ì„ ìˆ˜ ìˆì–´ í‚¤ ì´ë²¤íŠ¸ë¥¼ ì‰½ê²Œ ë°›ìŠµë‹ˆë‹¤. -->
  <div id="table" tabindex="0"></div>
  <div class="note">
    Tip: ë§ˆìš°ìŠ¤ë¡œ ì…€ì„ ë“œë˜ê·¸í•´ ë²”ìœ„ë¥¼ ì„ íƒí•œ ë’¤ <b>Ctrl/Cmd + C</b> â†’ ë©”ëª¨ì¥/ì—‘ì…€ì— ë¶™ì—¬ë„£ê¸°.
    (ë¸Œë¼ìš°ì € ë³´ì•ˆ ì •ì±… ë•Œë¬¸ì— <b>file://</b> ëŒ€ì‹  <b>http(s)</b> í™˜ê²½ì—ì„œ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”)
  </div>

  <!-- Tabulator JS (CDN) -->
  <script src="https://unpkg.com/tabulator-tables@latest/dist/js/tabulator.min.js"></script>

  <script>
    // ---------------------------
    // ë°ëª¨ìš© ì´ˆê¸° ë°ì´í„°
    // ---------------------------
    const tableData = [
      { id:1, name:"í™ê¸¸ë™", age:29, city:"ì„œìš¸", join:"2024-10-01", score: 83 },
      { id:2, name:"ê¹€ì•„ë¦„", age:32, city:"ë¶€ì‚°", join:"2023-07-12", score: 91 },
      { id:3, name:"ì´ì¤€í˜¸", age:26, city:"ëŒ€êµ¬", join:"2025-01-10", score: 75 },
      { id:4, name:"ë°•ì§€ë¯¼", age:41, city:"ì¸ì²œ", join:"2022-03-30", score: 88 },
    ];

    // ---------------------------
    // Tabulator ì¸ìŠ¤í„´ìŠ¤ ìƒì„±
    // ---------------------------
    const table = new Tabulator("#table", {
      // ê¸°ë³¸ ë°ì´í„°/í‚¤
      data: tableData,            // ì´ˆê¸° ë°ì´í„°
      index: "id",                // ê° í–‰ì˜ ê³ ìœ í‚¤(ì¤‘ë³µX)

      // ë ˆì´ì•„ì›ƒ/í–‰ë†’ì´
      layout: "fitColumns",       // ì»¬ëŸ¼ ë„ˆë¹„ ìë™ë§ì¶¤
      height: "420px",            // ê°€ìƒ ìŠ¤í¬ë¡¤
      selectable: true,           // í–‰ ì„ íƒ ê°€ëŠ¥(í–‰ ì‚­ì œ ë“±ì— ì‚¬ìš©)

      // ìƒí˜¸ì‘ìš© ê¸°ë³¸ ì˜µì…˜
      movableColumns: true,       // ì»¬ëŸ¼ ë“œë˜ê·¸ë¡œ ìˆœì„œë³€ê²½
      resizableRows: true,        // í–‰ë†’ì´ ì¡°ì ˆ

      // âœ… í´ë¦½ë³´ë“œ & ë²”ìœ„ ì„ íƒ (ì—¬ëŸ¬ ì…€ ë³µì‚¬ìš©)
      clipboard: true,                 // Tabulator í´ë¦½ë³´ë“œ ëª¨ë“ˆ í™œì„±í™”
      clipboardPasteAction: "update",  // ë¶™ì—¬ë„£ê¸° ì‹œ ê¸°ì¡´ ì…€ ì—…ë°ì´íŠ¸
      selectableRange: true,           // ë§ˆìš°ìŠ¤ ë“œë˜ê·¸ë¡œ ì…€ ë²”ìœ„ ì„ íƒ
      selectableRangeMode: "cell",     // ì„ íƒ ë‹¨ìœ„ë¥¼ 'ì…€'ë¡œ ê³ ì •
      selectableRangeRows: true,       // í–‰ ë‹¨ìœ„ ë“œë˜ê·¸ í—ˆìš©(ì„ íƒ í¸ì˜)
      selectableRangeColumns: true,    // ì»¬ëŸ¼ ë‹¨ìœ„ ë“œë˜ê·¸ í—ˆìš©(ì„ íƒ í¸ì˜)

      // (ì„ íƒ) ë³µì‚¬ ì‹œ í—¤ë” í¬í•¨ ë“± ìƒì„¸ ì„¤ì •
      clipboardCopyConfig: {
        columnHeaders: false,   // trueë©´ ì²« í–‰ì— ì»¬ëŸ¼í—¤ë” ì¶”ê°€
        rowHeaders: false,
        columnGroups: false,
      },

      // ì»¬ëŸ¼ ì •ì˜
      columns: [
        { title:"ID", field:"id", width:70, headerSort:true, editor:"input" },
        { title:"ì´ë¦„", field:"name", width:80, headerSort:true, editor:"input" },
        { title:"ë‚˜ì´", field:"age", width:80, hozAlign:"right", editor:"number",
          validator:[{ type:"min", parameters:18 }, { type:"max", parameters:120 }],
        },
        { title:"ë„ì‹œ", field:"city", width:70, headerSort:true, editor:"input" },
        { title:"ì…ì‚¬ì¼", field:"join", width:70, editor:"input",
          // ê°„ë‹¨ ë‚ ì§œ í¬ë§· ê²€ì¦(YYYY-MM-DD)
          validator: (cell, value) => /^\d{4}-\d{2}-\d{2}$/.test(value) || value === "",
        },
        { title:"ì ìˆ˜", field:"score", width:90, hozAlign:"right", editor:"number",
          formatter: (cell) => {
            // ì ìˆ˜ì— ë”°ë¼ ë¼ë²¨ë§(ì˜ˆ: 90ì´ìƒ ìš°ìˆ˜)
            const v = Number(cell.getValue());
            if (Number.isNaN(v)) return "";
            if (v >= 90) return `â­ ${v}`;
            if (v >= 80) return `ğŸ‘ ${v}`;
            return `${v}`;
          },
        },
      ],
    });

    // ---------------------------
    // (ì¤‘ìš”) í‚¤ë³´ë“œì—ì„œ Ctrl/Cmd + Cë¡œ ë³µì‚¬
    // ---------------------------
    const tableEl = document.getElementById("table");

    // ë§ˆìš°ìŠ¤ë¡œ í…Œì´ë¸”ì„ í•œ ë²ˆì´ë¼ë„ í´ë¦­í•˜ë©´ ì»¨í…Œì´ë„ˆê°€ í¬ì»¤ìŠ¤ë¥¼ ê°–ê²Œ í•´ì„œ
    // í‚¤ ì´ë²¤íŠ¸ë¥¼ ì•ˆì •ì ìœ¼ë¡œ ë°›ë„ë¡ í•©ë‹ˆë‹¤.
    tableEl.addEventListener("mousedown", () => {
      if (document.activeElement !== tableEl) {
        tableEl.focus();
      }
    });

    // Ctrl/Cmd + C ëˆŒë €ì„ ë•Œ, í…Œì´ë¸” ì•ˆì—ì„œ í¸ì§‘ ì¤‘ì´ ì•„ë‹ˆë¼ë©´ Tabulator ë³µì‚¬ ì‹¤í–‰
    tableEl.addEventListener("keydown", (ev) => {
      const isMac = navigator.platform.toUpperCase().includes("MAC");
      const ctrlOrCmd = isMac ? ev.metaKey : ev.ctrlKey;

      // í¸ì§‘ ì¤‘(input/textarea/contenteditable)ì´ë©´ ê¸°ë³¸ ë³µì‚¬ ë™ì‘ì„ ê·¸ëŒ€ë¡œ ë‘ê¸°
      const t = ev.target;
      const tag = t && t.tagName ? t.tagName.toLowerCase() : "";
      const editing = tag === "input" || tag === "textarea" || (t && t.isContentEditable);

      if (ctrlOrCmd && ev.key.toLowerCase() === "c" && !editing) {
        ev.preventDefault(); // ê¸°ë³¸(ì•„ë¬´ê²ƒë„ ì„ íƒë˜ì§€ ì•Šì€) ë³µì‚¬ ë°©ì§€
        try {
          // âœ… ì„ íƒëœ 'ì…€ ë²”ìœ„' ìš°ì„  ë³µì‚¬
          table.copyToClipboard("range");
        } catch (e) {
          // â†© í˜¹ì‹œ ë²„ì „ì— ë”°ë¼ range ë¯¸ì§€ì›/ì˜¤ë¥˜ ì‹œ í–‰ ì„ íƒ ë³µì‚¬ë¡œ í´ë°±
          table.copyToClipboard("selected");
        }
      }
    });

    // ---------------------------
    // íˆ´ë°”: ê²€ìƒ‰(ì‹¤ì‹œê°„ í•„í„°)
    // ---------------------------
    const $search = document.getElementById("search");
    $search.addEventListener("input", () => {
      const query = $search.value.trim();
      if (!query) {
        table.clearFilter(); // ê²€ìƒ‰ì–´ ì—†ìœ¼ë©´ í•„í„° í•´ì œ
      } else {
        // ì´ë¦„/ë„ì‹œ ì»¬ëŸ¼ OR í•„í„° (ë¶€ë¶„ì¼ì¹˜)
        table.setFilter([
          [
            { field:"name", type:"like", value:query },
            { field:"city", type:"like", value:query },
          ]
        ]);
      }
    });

    // ---------------------------
    // íˆ´ë°”: í–‰ ì¶”ê°€/ì‚­ì œ
    // ---------------------------
    document.getElementById("add-row").addEventListener("click", () => {
      const newId = Date.now(); // ê°„ë‹¨ ìœ ë‹ˆí¬ ID
      table.addRow({ id:newId, name:"", age:null, city:"", join:"", score:null }, true);
    });

    document.getElementById("del-row").addEventListener("click", () => {
      const selected = table.getSelectedRows();
      if (selected.length === 0) {
        alert("ì‚­ì œí•  í–‰ì„ ì„ íƒí•˜ì„¸ìš”.");
        return;
      }
      selected.forEach(r => r.delete());
    });

    // ---------------------------
    // íˆ´ë°”: CSV ë‚´ë³´ë‚´ê¸°
    // ---------------------------
    document.getElementById("export-csv").addEventListener("click", () => {
      table.download("csv", "table-export.csv");
    });

    // ---------------------------
    // ì…€ í¸ì§‘ ì½œë°±(ë¡œê¹…/ê²€ì¦ í”¼ë“œë°± ì˜ˆì‹œ)
    // ---------------------------
    table.on("cellEdited", (cell) => {
      const field = cell.getField();
      const value = cell.getValue();
      if ((field === "age" || field === "score") && value !== null && value !== "" && isNaN(Number(value))) {
        alert(`'${field}'ì—ëŠ” ìˆ«ìë§Œ ì…ë ¥í•˜ì„¸ìš”.`);
        cell.restoreOldValue(); // ì´ì „ ê°’ìœ¼ë¡œ ë˜ëŒë¦¼
      }
    });
  </script>
</body>
</html>

<!--
ì™œ ì´ ë°©ë²•ì´ í™•ì‹¤í•œê°€?

ë²„íŠ¼ í´ë¦­ì´ ì˜ ë˜ëŠ” ê±¸ ë³´ë©´, Tabulatorì˜ ë³µì‚¬ ìì²´ëŠ” ì •ìƒì´ê³  ë¸Œë¼ìš°ì € ë³´ì•ˆÂ·ê¶Œí•œë„ ì¶©ì¡±í•©ë‹ˆë‹¤.

ë¬¸ì œëŠ” í‚¤ ì…ë ¥ ì‹œ Tabulatorê°€ ìë™ìœ¼ë¡œ ë³µì‚¬ë¥¼ íŠ¸ë¦¬ê±°í•´ ì£¼ì§€ ì•ŠëŠ” í™˜ê²½(ë˜ëŠ” í¬ì»¤ìŠ¤/í¸ì§‘ ìƒíƒœì— ë”°ë¥¸ ë¯¸íŠ¸ë¦¬ê±°)ì´ì—ˆì–´ìš”.

ê·¸ë˜ì„œ í‚¤ë‹¤ìš´ ì‹œì ì— ì§ì ‘ table.copyToClipboard('range')ë¥¼ í˜¸ì¶œí•´ ì£¼ë©´ ë²„íŠ¼ê³¼ ë™ì¼í•˜ê²Œ ë™ì‘í•©ë‹ˆë‹¤.

í•„ìš”í•˜ë©´ â€œí—¤ë” í¬í•¨ ë³µì‚¬â€(ì²« ì¤„ì— ì»¬ëŸ¼ëª… ì¶”ê°€)ë‚˜ CSV/TSV í¬ë§· ê°•ì œ ê°™ì€ ì„¸ë¶€ ì˜µì…˜ë„ ë” ë¶™ì—¬ë“œë¦´ê²Œìš”!
-->